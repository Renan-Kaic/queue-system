### Variáveis
@baseUrl =http://localhost:5234
@token =eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6ImFhNzRjYTA4LWJiNTQtNGJiYS1hNWRhLTY0ZWI4YTdmNmFmYSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6InJlbmFua2FpdjJAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZSI6InJlbmFua2FpdjJAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiQWRtaW4iLCJleHAiOjE3NjI2MTY2MjAsImlzcyI6Ik1pbmhhQVBJIiwiYXVkIjoiTWluaGFBcGxpY2FjYW8ifQ.jjdQN7zT2yY79sXN-V9YP9ZOumgUdbR3cfK2_xiCDco
@departmentId =1

### ============================================
### QUEUE - CRUD COMPLETO
### ============================================

### ============================================
### POST - Criar Fila
### ============================================

### 1. Criar fila Ativa - Fila Geral
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila Geral",
  "code": "FG",
  "description": "Fila principal de atendimento geral",
  "maxQueueSize": 50,
  "departmentId": 1,
  "status": 0
}

### 2. Criar fila Ativa - Fila Prioritária
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila Prioritária",
  "code": "FP-001",
  "description": "Fila para atendimento prioritário (idosos, gestantes, PCD)",
  "maxQueueSize": 30,
  "departmentId": 1,
  "status": 0
}

### 3. Criar fila de Emergência
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila de Emergência",
  "code": "FE-001",
  "description": "Fila para casos de emergência médica",
  "maxQueueSize": 20,
  "departmentId": 1,
  "status": 0
}

### 4. Criar fila de Consultas Agendadas
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Consultas Agendadas",
  "code": "CA-001",
  "description": "Fila para pacientes com consultas previamente agendadas",
  "maxQueueSize": 40,
  "departmentId": 1,
  "status": 0
}

### 5. Criar fila de Retorno
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila de Retorno",
  "code": "FR-001",
  "description": "Fila para pacientes em retorno de consulta",
  "maxQueueSize": 25,
  "departmentId": 1,
  "status": 0
}

### 6. Criar fila de Exames
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila de Exames",
  "code": "FEX-001",
  "description": "Fila para realização de exames laboratoriais",
  "maxQueueSize": 60,
  "departmentId": 1,
  "status": 0
}

### 7. Criar fila sem descrição (opcional)
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila Rápida",
  "code": "FRAP-001",
  "description": null,
  "maxQueueSize": 15,
  "departmentId": 1,
  "status": 0
}

### 8. Criar fila Inativa
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila Teste",
  "code": "FT-001",
  "description": "Fila para testes - Inativa",
  "maxQueueSize": 10,
  "departmentId": 1,
  "status": 1
}

### 9. Criar fila Pausada
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila Pausada",
  "code": "FPAU-001",
  "description": "Fila temporariamente pausada",
  "maxQueueSize": 5,
  "departmentId": 1,
  "status": 2
}

### 10. Criar fila para outro departamento (Ortopedia - ID 2)
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila Ortopédica",
  "code": "FORT-001",
  "description": "Fila específica para atendimento ortopédico",
  "maxQueueSize": 35,
  "departmentId": 2,
  "status": 0
}

### 11. Criar fila para Emergência (ID 3)
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Trauma",
  "code": "TRA-001",
  "description": "Fila para casos de trauma",
  "maxQueueSize": 15,
  "departmentId": 3,
  "status": 0
}

### ============================================
### PUT - Atualizar Fila
### ============================================

### 1. Atualizar fila completa
PUT {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{ 
  "id": 1,
  "name": "Fila Geral Atualizada",
  "code": "FG",
  "description": "Fila principal de atendimento geral - ATUALIZADA",
  "maxQueueSize": 60,
  "departmentId": 1,
  "status": 0
}

### 2. Atualizar apenas tamanho máximo da fila
PUT {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{ 
  "id": 2,
  "name": "Fila Prioritária",
  "code": "FP-001",
  "description": "Fila para atendimento prioritário (idosos, gestantes, PCD)",
  "maxQueueSize": 40,
  "departmentId": 1,
  "status": 0
}

### 3. Alterar status para Inativa
PUT {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{ 
  "id": 3,
  "name": "Fila de Emergência",
  "code": "FE-001",
  "description": "Fila para casos de emergência médica",
  "maxQueueSize": 20,
  "departmentId": 1,
  "status": 1
}

### 4. Reativar fila (status = Active)
PUT {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{ 
  "id": 3,
  "name": "Fila de Emergência",
  "code": "FE-001",
  "description": "Fila para casos de emergência médica - REATIVADA",
  "maxQueueSize": 20,
  "departmentId": 1,
  "status": 0
}

### 5. Mover fila para outro departamento
PUT {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{ 
  "id": 1,
  "name": "Consultas Agendadas",
  "code": "CA-001",
  "description": "Fila para pacientes com consultas previamente agendadas",
  "maxQueueSize": 40,
  "departmentId": 2,
  "status": 0
}

### 6. Pausar fila (status = Paused)
PUT {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{ 
  "id": 5,
  "name": "Fila de Retorno",
  "code": "FR-001",
  "description": "Fila para pacientes em retorno de consulta - PAUSADA",
  "maxQueueSize": 25,
  "departmentId": 1,
  "status": 2
}

### ============================================
### DELETE - Excluir Fila
### ============================================

### 1. Deletar fila por ID
DELETE {{baseUrl}}/queue/8 HTTP/1.1
Authorization: Bearer {{token}}

### 2. Deletar fila de teste
DELETE {{baseUrl}}/queue/9 HTTP/1.1
Authorization: Bearer {{token}}

### 3. Tentar deletar fila inexistente (deve retornar 404)
DELETE {{baseUrl}}/queue/999 HTTP/1.1
Authorization: Bearer {{token}}

### ============================================
### GET - Listar Todas as Filas
### ============================================
GET {{baseUrl}}/queue HTTP/1.1
Authorization: Bearer {{token}}

### ============================================
### GET - Buscar Fila por ID
### ============================================

### 1. Buscar fila existente (ID 1)
GET {{baseUrl}}/queue/1 HTTP/1.1
Authorization: Bearer {{token}}

### 2. Buscar fila existente (ID 2)
GET {{baseUrl}}/queue/2 HTTP/1.1
Authorization: Bearer {{token}}

### 3. Buscar fila existente (ID 3)
GET {{baseUrl}}/queue/3 HTTP/1.1
Authorization: Bearer {{token}}

### ============================================
### TESTES DE VALIDAÇÃO E CASOS DE ERRO
### ============================================

### Tentar criar fila com nome duplicado no mesmo departamento (deve retornar erro)
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila Geral",
  "code": "FG-DUP",
  "description": "Teste de nome duplicado",
  "maxQueueSize": 10,
  "departmentId": 1,
  "status": 0
}

### Tentar criar fila com código duplicado no mesmo departamento (deve retornar erro)
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila Duplicada",
  "code": "FG-001",
  "description": "Teste de código duplicado",
  "maxQueueSize": 10,
  "departmentId": 1,
  "status": 0
}

### Tentar criar fila com departamento inexistente (deve retornar erro 404)
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila Sem Departamento",
  "code": "FSD-001",
  "description": "Teste com departamento inexistente",
  "maxQueueSize": 10,
  "departmentId": 999,
  "status": 0
}

### Tentar buscar fila com ID inexistente (deve retornar 404)
GET {{baseUrl}}/queue/999 HTTP/1.1
Authorization: Bearer {{token}}

### Tentar criar fila sem token (deve retornar 401)
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json

{
  "name": "Sem Autorização",
  "code": "SEM-001",
  "description": "Teste sem token",
  "maxQueueSize": 10,
  "departmentId": 1,
  "status": 0
}

### Tentar atualizar fila inexistente (deve retornar 404)
PUT {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{ 
  "id": 999,
  "name": "Inexistente",
  "code": "INX-001",
  "description": "Fila que não existe",
  "maxQueueSize": 10,
  "departmentId": 1,
  "status": 0
}

### Tentar atualizar fila com departamento inexistente (deve retornar erro)
PUT {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{ 
  "id": 1,
  "name": "Fila Geral",
  "code": "FG-001",
  "description": "Teste com departamento inexistente",
  "maxQueueSize": 50,
  "departmentId": 999,
  "status": 0
}

### Tentar deletar fila sem autenticação (deve retornar 401)
DELETE {{baseUrl}}/queue/1 HTTP/1.1

### ============================================
### TESTES DE CASOS VÁLIDOS ESPECIAIS
### ============================================

### Criar fila com tamanho máximo muito grande
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila Grande",
  "code": "FGRND-001",
  "description": "Fila com capacidade elevada",
  "maxQueueSize": 1000,
  "departmentId": 1,
  "status": 0
}

### Criar fila com tamanho máximo mínimo
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila Pequena",
  "code": "FPEQ-001",
  "description": "Fila com capacidade mínima",
  "maxQueueSize": 1,
  "departmentId": 1,
  "status": 0
}

### Criar filas com mesmo nome/código mas em departamentos diferentes (deve funcionar)
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila Geral",
  "code": "FG-001",
  "description": "Fila geral do departamento de Ortopedia",
  "maxQueueSize": 30,
  "departmentId": 2,
  "status": 0
}

### Criar fila com descrição muito longa
POST {{baseUrl}}/queue HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Fila com Descrição Longa",
  "code": "FDESC-001",
  "description": "Esta é uma fila de teste com uma descrição muito longa para verificar como o sistema lida com textos extensos. A descrição pode conter várias informações importantes sobre o funcionamento da fila, suas regras, prioridades e procedimentos específicos que devem ser seguidos pelos atendentes e pacientes.",
  "maxQueueSize": 25,
  "departmentId": 1,
  "status": 0
}

### ============================================
### NOTAS SOBRE OS VALORES:
### ============================================
### Status (QueueStatus enum):
###   0 = Active (Ativa)
###   1 = Inactive (Inativa)
###   2 = Paused (Pausada)
###   3 = Full (Cheia)
###
### Campos obrigatórios:
###   - name: Nome da fila
###   - code: Código único da fila (único por departamento)
###   - maxQueueSize: Tamanho máximo da fila
###   - departmentId: ID do departamento (deve existir)
###   - status: Status da fila (0-3)
###
### Campos opcionais:
###   - description: Descrição da fila
###
### Headers necessários:
###   - Authorization: Bearer token JWT válido
###   - Content-Type: application/json (para POST e PUT)
###
### Endpoints disponíveis:
###   GET    /queue          - Lista todas as filas
###   GET    /queue/{id}     - Busca fila por ID
###   POST   /queue          - Cria nova fila
###   PUT    /queue          - Atualiza fila existente
###   DELETE /queue/{id}     - Exclui fila por ID
###
### Regras de Negócio:
###   - Nome da fila deve ser único por departamento
###   - Código da fila deve ser único por departamento
###   - O departamento informado deve existir no sistema
###   - Filas podem ter o mesmo nome/código em departamentos diferentes
###   - CurrentQueueSize é gerenciado automaticamente (inicia em 0)
###   - MaxQueueSize define o limite máximo de pessoas na fila
